(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"0kEm":function(e,t,r){"use strict";r.r(t);var a=r("mrSG"),n=r("CcnG"),o=r("Ip0R"),i=r("FpXt"),s=r("ZYCi"),c=r("gIcY"),m=r("FTgb"),l=r("iiAa"),p=r("XlPw"),d=r("buKM"),u=r("jRgp"),h=r("67Y/"),f=r("9Z1F"),g=r("MIKN"),b=r("Uq3Z"),v=r("Oy5v"),_=function(){function e(e,t,r,a,n,o,i){this._formBuilder=e,this._http=t,this._utilityService=r,this._router=a,this._formService=n,this._dataTransferService=o,this.permissionsService=i}return e.prototype.createLoginForm=function(){return this._formBuilder.group({email:this._formService.getControl("email"),password:this._formService.getControl("password")})},e.prototype.login=function(e){var t=this;return(e=this._utilityService.trim(e)).deviceToken=localStorage.getItem("fleet-firebase-token"),e.deviceId=Math.floor(1e9*Math.random()).toString(),e.deviceToken||delete e.deviceToken,this._http.post(u.kb,e).pipe(Object(h.a)((function(e){return t.loginSuccess(e.data),e})),Object(f.a)((function(e){return Object(p.a)(e)})))},e.prototype.loginSuccess=function(e){this.permissionsService.addPermission(e.adminObject.permission),this.permissionsService.loadPermissions(e.adminObject.permission),localStorage.setItem("fleet-admin-token",e.accessToken),localStorage.setItem("fleet-admin-role",e.adminObject.adminType),localStorage.setItem("fleet-admin-name",e.adminObject.name),localStorage.setItem("fleet-admin-id",e.adminObject._id),localStorage.setItem("adminPermission",JSON.stringify(e.adminObject.permission)),this._dataTransferService.profileData=e.adminObject,e.adminObject.isProfileComplete?this._router.navigate([""+v.DASHBOARD]):this._router.navigate([""+u.h])},e.ctorParameters=function(){return[{type:c.d},{type:m.a},{type:l.a},{type:s.d},{type:d.a},{type:g.a},{type:b.b}]},e=a.__decorate([Object(n.D)(),a.__metadata("design:paramtypes",[c.d,m.a,l.a,s.d,d.a,g.a,b.b])],e)}(),S=function(){function e(e){this._loginService=e,this.hide=!0,this.createLoginForm()}return e.prototype.ngOnInit=function(){},e.prototype.createLoginForm=function(){this.loginForm=this._loginService.createLoginForm()},e.prototype.getControl=function(e){return this.loginForm.controls[e]},e.prototype.login=function(){var e=this;if(!this.loginForm.invalid&&!this.loginForm.disabled){var t=a.__assign({},this.loginForm.value);this.loginForm.disable(),this._loginService.login(t).subscribe((function(e){}),(function(t){e.loginForm.enable()}))}},e.ctorParameters=function(){return[{type:_}]},e=a.__decorate([Object(n.n)({selector:"app-login",template:a.__importDefault(r("w8hk")).default,styles:[a.__importDefault(r("aJ9e")).default]}),a.__metadata("design:paramtypes",[_])],e)}(),y=r("b716"),O=r("seP3"),w=r("UodH"),L=r("SMsm"),j=r("3V+5"),P=r("+lFD");r.d(t,"LoginModule",(function(){return F}));var x=[{path:"",component:S,canActivate:[P.a]}],F=function(){function e(){}return e=a.__decorate([Object(n.L)({imports:[o.c,s.e.forChild(x),i.a,y.b,O.c,w.a,L.a,c.n,j.a],declarations:[S],providers:[_]})],e)}()},"3V+5":function(e,t,r){"use strict";var a=r("mrSG"),n=r("CcnG"),o=r("vblm"),i=r("FaG1"),s=function(){function e(){}return e.prototype.transform=function(e,t,r){return e&&e.errors?this.getValidationError(e,t,r):""},e.prototype.getValidationError=function(e,t,r){return this.charMessage=r||"characters",e.hasError("required")?t+" is required":e.hasError("pattern")?function(e,t){return e==i.a.email?"Please enter a valid "+t.toLowerCase():e==i.a.password?Object(o.l)(t)+" can not contain blank spaces":e==i.a.name?Object(o.l)(t)+" can not be blank":e==i.a.phone?Object(o.l)(t)+" must contain only numbers and can not start with 0":e==i.a.onlyNumber?"Only digits are allowed":e==i.a.price?Object(o.l)(t)+" must be numeric":e==i.a.alphaNumeric?Object(o.l)(t)+" can contain only characters and numbers":e==i.a.alphaNumericWithSpace?Object(o.l)(t)+" can contain only characters and numbers":e==i.a.alphabetsWithSpace?Object(o.l)(t)+" can contain only characters and space":e==i.a.noSpace?Object(o.l)(t)+" can't contain space":void 0}(e.errors.pattern.requiredPattern,t):e.hasError("minlength")?Object(o.l)(t)+" must be at least "+e.errors.minlength.requiredLength+" "+this.charMessage+" long":e.hasError("maxlength")?Object(o.l)(t)+" can not be more than "+e.errors.maxlength.requiredLength+" "+this.charMessage+" long":e.hasError("matchPassword")?o.i[t].matchPassword||"":e.hasError("min")?Object(o.l)(t)+" can not be less than "+e.errors.min.min:e.hasError("max")?Object(o.l)(t)+" can not be greater than "+e.errors.max.max:e.hasError("alpha")?" Please enter correct "+Object(o.l)(t):void 0},e=a.__decorate([Object(n.W)({name:"validate",pure:!1}),a.__metadata("design:paramtypes",[])],e)}(),c=r("Ip0R"),m=r("gIcY");r.d(t,"a",(function(){return l}));var l=function(){function e(){}return e=a.__decorate([Object(n.L)({imports:[c.c,m.n],declarations:[s],exports:[s],providers:[]})],e)}()},FaG1:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var a={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,password:/^[^\s]+$/,name:/(.|\s)*\S(.|\s)*/,phone:"^[1-9][0-9]*$",price:/(^[0][1-9]+)|([1-9]\d*)+$/,alphaNumeric:"^[a-zA-Z0-9]+$",alphaNumericWithSpace:"^[a-zA-Z0-9 ]+$",alphabetsWithSpace:"^[a-zA-Z ]*$",onlyNumber:"^[0-9]*$",noSpace:/^\S*$/}},aJ9e:function(e,t,r){"use strict";r.r(t),t.default=""},buKM:function(e,t,r){"use strict";var a=r("mrSG"),n=r("CcnG"),o=r("gIcY"),i=r("FaG1"),s=100,c=8,m=20,l=3,p=100,d=10,u=10,h=3,f=1e3,g=1,b=10,v=2,_=20;r.d(t,"a",(function(){return S}));var S=function(){function e(){this.VALIDATION={name:[o.o.pattern(i.a.alphabetsWithSpace),o.o.minLength(l),o.o.maxLength(p)],profileName:[o.o.pattern(i.a.name),o.o.minLength(l),o.o.maxLength(p)],alphabetic:[o.o.pattern(i.a.alphabetsWithSpace),o.o.minLength(l),o.o.maxLength(p)],alphaNumeric:[o.o.pattern(i.a.alphaNumericWithSpace),o.o.minLength(l),o.o.maxLength(p)],price:[o.o.pattern(i.a.price),o.o.minLength(g),o.o.maxLength(b),o.o.min(0)],seatingCapacity:[o.o.required,o.o.pattern(i.a.phone),o.o.min(v),o.o.max(_)],email:[o.o.pattern(i.a.email),o.o.maxLength(s)],description:[o.o.pattern(i.a.name),o.o.minLength(h),o.o.maxLength(f)],password:[o.o.pattern(i.a.password),o.o.minLength(c),o.o.maxLength(m)],phone:[o.o.required,o.o.pattern(i.a.phone),o.o.minLength(d),o.o.maxLength(u)],crfLimitMonth:[o.o.required,o.o.pattern(i.a.onlyNumber)],cutOff:[],dropdown:[],checkbox:[],address:[o.o.required],longitude:[o.o.required],latitude:[o.o.required],startShift:[o.o.required],endShift:[o.o.required],googleAddress:[o.o.required,o.o.minLength(l),o.o.maxLength(p)],noSpace:[o.o.required,o.o.pattern(i.a.noSpace)]}}return e.prototype.matchPassword=function(e){var t=e.get("password").value,r=e.get("confirmPassword").value;t!==r?e.get("confirmPassword").setErrors({matchPassword:!0}):t===r&&e.get("confirmPassword").errors&&(delete e.get("confirmPassword").errors.matchPassword,0===Object.keys(e.get("confirmPassword").errors).length&&e.get("confirmPassword").setErrors(null))},e.prototype.getControl=function(e,t){void 0===t&&(t=!0);var r=this.VALIDATION[e].slice();return t&&("checkbox"===e?r.splice(0,0,o.o.requiredTrue):r.splice(0,0,o.o.required)),["",o.o.compose(r)]},e.prototype.getFilterFormControls=function(e){for(var t={},r=0,a=e;r<a.length;r++){t[a[r]]=[null]}return t},e=a.__decorate([Object(n.D)({providedIn:"root"}),a.__metadata("design:paramtypes",[])],e)}()},w8hk:function(e,t,r){"use strict";r.r(t),t.default='<h1 class="form_heading">Login</h1>\n<form [formGroup]="loginForm" (ngSubmit)="login()">\n  <div class="form_filed_wrapper">\n    <mat-form-field appearance="outline">\n      <mat-label>Email</mat-label>\n      <input matInput formControlName="email">\n      <mat-error>{{getControl(\'email\')|validate:\'email\'}}</mat-error>\n    </mat-form-field>\n  </div>\n  <div class="form_filed_wrapper">\n    <mat-form-field appearance="outline">\n      <mat-label>Password</mat-label>\n      <input matInput formControlName="password" [type]="hide ? \'password\' :\'text\'">\n      <mat-error>{{getControl(\'password\')|validate:\'password\'}}</mat-error>\n      <mat-icon matSuffix (click)="hide = !hide">\n        {{hide ? \'visibility_off\' :\'visibility\'}}\n      </mat-icon>\n    </mat-form-field>\n  </div>\n  <div class="form_filed_wrapper text-right">\n    <a class="forgot" [routerLink]="\'FORGOT_PASSWORD\'|absolutePath">Forgot Password</a>\n  </div>\n  <div class="form_filed_wrapper text-center">\n    <button mat-raised-button color="primary">Login</button>\n  </div>\n</form>'}}]);